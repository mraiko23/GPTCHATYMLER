# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å JSON Database

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∑–∞ 3 —à–∞–≥–∞

### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
bundle exec rails runner "load 'db/seeds.rb'"
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `db/db.json` –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ JavaScript assets
```bash
npm install
npm run build
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
bundle exec rails s
```

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:3000/
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: http://localhost:3000/admin/login

### –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É:
- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: `admin123`

## üìÇ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

–í—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ:
```
db/db.json  ‚Üê –í–°–Ø –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```

–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
storage/
  ‚îú‚îÄ‚îÄ uuid-1234...  ‚Üê –§–∞–π–ª 1
  ‚îú‚îÄ‚îÄ uuid-5678...  ‚Üê –§–∞–π–ª 2
  ‚îî‚îÄ‚îÄ ...
```

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Rails console

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å
bundle exec rails console

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = User.create!(
  name: 'Test User',
  email: 'test@example.com',
  verified: true
)

# –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
chat = user.chats.create!(title: '–ú–æ–π –ø–µ—Ä–≤—ã–π —á–∞—Ç')

# –°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
message = Message.create!(
  chat_id: chat.id,
  role: 'user',
  content: '–ü—Ä–∏–≤–µ—Ç!'
)

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —á–∞—Ç—ã
Chat.all

# –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
User.find_by(email: 'test@example.com')
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤—Å–µ–π –±–∞–∑—ã
cat db/db.json | jq '.'

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
cat db/db.json | jq '.users'

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ –∑–∞–ø–∏—Å–µ–π
cat db/db.json | jq '.counters'

# –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
du -h db/db.json
```

## üîÑ Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –°–æ–∑–¥–∞—Ç—å backup
```bash
cp db/db.json db/db.json.backup
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
```bash
cp db/db.json.backup db/db.json
```

### Backup —Å –¥–∞—Ç–æ–π
```bash
cp db/db.json "db/db.json.$(date +%Y%m%d_%H%M%S)"
```

## üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É —Å –Ω—É–ª—è
```bash
rm db/db.json
bundle exec rails runner "load 'db/seeds.rb'"
```

### –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã (–≤ console)
```ruby
Chat.destroy_all
Message.destroy_all
```

### –£–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–∞)
```ruby
User.destroy_all
Session.destroy_all
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```bash
cat db/db.json | jq '.counters'
```

–í—ã–≤–æ–¥:
```json
{
  "users": 5,
  "sessions": 10,
  "chats": 15,
  "messages": 150,
  "administrators": 1,
  "admin_oplogs": 25,
  "active_storage_blobs": 8,
  "active_storage_attachments": 8
}
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```bash
cat db/db.json | jq '.messages | sort_by(.created_at) | reverse | .[0:5]'
```

## üîß Troubleshooting

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–∞–ø–∫–∞ db
ls -la db/

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
mkdir -p db

# –ó–∞–ø—É—Å—Ç–∏—Ç—å seeds –∑–∞–Ω–æ–≤–æ
bundle exec rails runner "load 'db/seeds.rb'"
```

### –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–ø–∫—É storage
ls -la storage/

# –°–æ–∑–¥–∞—Ç—å –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
mkdir -p storage
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å assets
npm run build

# –û—á–∏—Å—Ç–∏—Ç—å tmp
rm -rf tmp/cache
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
cp db/db.json.backup db/db.json

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
rm db/db.json
bundle exec rails runner "load 'db/seeds.rb'"
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **JSON_DATABASE_MIGRATION.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- **MIGRATION_SUMMARY.md** - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –∏—Å–ø–æ–ª—å–∑—É—è JSON –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö!

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `db/db.json` - –ø—Ä–æ—Å—Ç–æ, —É–¥–æ–±–Ω–æ, –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ! üéâ
